---
layout: post
cid: 128
title: 熊猫追番 (PandaBangumi) for Typecho 发布！ 
slug: 128
date: 2018/05/30 23:00:00
updated: 2019/08/22 09:42:59
status: publish
author: 熊猫小A
categories: 
  - 偶尔Geek
tags: 
  - 博客
  - 主题
excerpt: 
---


熊猫追番是一个可以给 Typecho 博客增加番剧展示功能的插件。我之前有写过一个独立页面模板，也是把 Bangumi 上的数据拉过来展示，我觉得也还蛮不错的，但是用起来还是不够方便，且功能不是很完善。这两天鼓捣鼓捣弄了一个插件版出来，用起来应该蛮舒服的～

## 更新

2018-11-18：2.0

移除了大量使用频率低的功能，仅保留追番列表功能。

* 移除了追番日历
* 移除了公共 CDN
* 移除了单个番剧展示
* 无需填写账号与密码，只需 ID
* 重写样式

2018-10-28：开启了精简的版本。在该版本中，去掉了番剧日历与展示单个番剧的功能。如要使用这个版本，请从 Github clone 最新的代码至本地，然后执行 `git checkout simple-ver`，然后在后台禁用再重新启用插件。新版本不需要账户与密码，只需要填写你的 ID，即你用户主页链接 user 后面那一串数字。

2018-08-29：重新写了样式，现在不只是单个展示的番剧，追番列表中的番剧也可以点击显示简介。请手动清除一下缓存的数据文件（插件设置页有删除缓存的按钮）。移除了并没有什么用的“黑暗模式”。由于增加了简介的缓存，首次加载时间会变长一些……

## 简单的功能列表

- 可展示追番列表与追番进度，带分页功能，可设置每页显示的数量，AJAX 加载
- ~~可展示番剧播放日历~~
- ~~可以单独展示某部番剧，一篇文章可以展示多部~~
- AJAX 加载 + 数据缓存，用起来应该还满顺畅的

## 使用

展示追番列表。

插件版添加了**分页功能**，这样追番很多时能节约流量，加快速度。追番列表与追番日历功能都可以自己选择要不要开启，在插件里设置就好。

使用方法：去 GitHub 上下载插件：

[https://github.com/AlanDecode/PandaBangumi-Typecho-Plugin](https://github.com/AlanDecode/PandaBangumi-Typecho-Plugin)

解压后把文件夹改名为 `PandaBangumi` ，上传到服务器 `/usr/plugins` 目录下，在 Typecho 后台启用本插件，填写 ID（即用户主页链接后的那串数字），设置一下每页展示的数量。如果你的博客没有引入 JQuery 的话可以在插件里选择引入。

在任何页面，不论是独立页还是一般的文章页面，在文章里插入这么一句：

```
<div class="bgm-collection" id="bgm-collection"></div>
```

保存发布，这个位置就会展开成追番展示面板。加载和分页都使用 AJAX 请求～

插件带了缓存功能，可以极大地提升速度，**但是记得要保证 `插件目录/json/bangumi.json` 这个文件可写**。


## 注意事项

服务器需要启用 PHP curl 扩展。

不一定所有主题都完美。

模板会向 插件目录/json/bangumi.json 文件写入缓存数据，请保证这个文件可写。

**如果你发现 PJAX 切换页面时番剧都不加载了，你需要去主题的 PJAX 回调函数中添加一句 initCollection();**

如果你的主题没有引入 JQuery，记得在插件设置里选择引入。

#### 引用与参考的项目

Bangumi API 部分参考了[梓喵出没](http://www.azimiao.com/)大佬写的一篇[Bangumi的几个API及使用PHP调用的简单测试](http://www.azimiao.com/2768.html) 。

**如果有帮助到你，欢迎在 GitHub 给我 star 哦～**